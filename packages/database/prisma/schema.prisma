generator client {
  provider = "prisma-client-js"
  output   = "./gen/client"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model Users {
  discord_id   BigInt        @id
  premium      Boolean
  posts        Int
  runs_left    Int
  Posts        Post[]
  PostComments PostComment[]
  Snippets     Snippet[]
}

model Snippet {
  snippet_id      BigInt @id @default(autoincrement())
  discord_id      BigInt
  snippet_code    String
  snippet_lang    String @db.VarChar(10)
  snippet_outcome String
  user            Users  @relation(fields: [discord_id], references: [discord_id], onDelete: Cascade)
}

model Post {
  post_id       BigInt        @id @default(autoincrement())
  discord_id    BigInt
  post_content  String
  post_date     DateTime
  post_lang     String        @db.VarChar(10)
  post_keywords String
  post_likes    Int
  post_dislikes Int
  post_comments Int
  user          Users         @relation(fields: [discord_id], references: [discord_id], onDelete: Cascade)
  comments      PostComment[]
}

model PostComment {
  comment_id      BigInt   @id @default(autoincrement())
  post_id         BigInt
  discord_id      BigInt
  comment_content String
  comment_date    DateTime
  user            Users    @relation(fields: [discord_id], references: [discord_id], onDelete: Cascade)
  post            Post     @relation(fields: [post_id], references: [post_id], onDelete: Cascade)
}
